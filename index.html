<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pestastic - Contract Management System</title>
  <meta name="description" content="Professional pest control contract management system">
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  
  <style>
    /* ============= CSS VARIABLES ============= */
    :root {
      --primary: #2563eb;
      --primary-hover: #1d4ed8;
      --primary-light: #dbeafe;
      --secondary: #64748b;
      --success: #22c55e;
      --success-light: #dcfce7;
      --warning: #f59e0b;
      --warning-light: #fef3c7;
      --danger: #ef4444;
      --danger-light: #fee2e2;
      --info: #3b82f6;
      --info-light: #dbeafe;
      
      --background: #f8fafc;
      --surface: #ffffff;
      --border: #e2e8f0;
      --text: #1e293b;
      --text-muted: #64748b;
      --muted: #94a3b8;
      
      --sidebar-width: 260px;
      --header-height: 64px;
      --radius: 8px;
      --shadow: 0 1px 3px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
      
      --status-success: #22c55e;
      --status-warning: #f59e0b;
      --status-danger: #ef4444;
      --status-info: #3b82f6;
    }

    /* ============= RESET & BASE ============= */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--background);
      color: var(--text);
      line-height: 1.5;
      min-height: 100vh;
    }

    a { color: var(--primary); text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* ============= UTILITIES ============= */
    .hidden { display: none !important; }
    .flex { display: flex; }
    .items-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .gap-2 { gap: 0.5rem; }
    .gap-4 { gap: 1rem; }
    .text-center { text-align: center; }
    .text-muted { color: var(--text-muted); }
    .text-success { color: var(--success); }
    .text-warning { color: var(--warning); }
    .text-danger { color: var(--danger); }
    .text-sm { font-size: 0.875rem; }
    .text-bold { font-weight: 600; }
    .truncate { max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .mb-4 { margin-bottom: 1rem; }

    /* ============= BUTTONS ============= */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.625rem 1.25rem;
      font-size: 0.875rem;
      font-weight: 500;
      border-radius: var(--radius);
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary { background: var(--primary); color: white; }
    .btn-primary:hover { background: var(--primary-hover); }
    .btn-secondary { background: var(--secondary); color: white; }
    .btn-secondary:hover { opacity: 0.9; }
    .btn-success { background: var(--success); color: white; }
    .btn-success:hover { opacity: 0.9; }
    .btn-danger { background: var(--danger); color: white; }
    .btn-danger:hover { opacity: 0.9; }
    .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--text); }
    .btn-outline:hover { background: var(--background); }
    .btn-sm { padding: 0.375rem 0.75rem; font-size: 0.75rem; }
    .btn-lg { padding: 0.875rem 1.75rem; font-size: 1rem; }

    /* ============= FORM ELEMENTS ============= */
    .form-group { margin-bottom: 1rem; }
    .form-group label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.375rem; color: var(--text); }
    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 0.625rem 0.875rem;
      font-size: 0.875rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--surface);
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-light);
    }
    .form-group textarea { resize: vertical; min-height: 80px; }
    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }

    .checkbox-grid { display: flex; flex-wrap: wrap; gap: 0.5rem; }
    .checkbox-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; padding: 0.25rem 0.5rem; background: var(--background); border-radius: var(--radius); }
    .checkbox-item input { width: auto; }

    /* ============= BADGES ============= */
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.625rem;
      font-size: 0.75rem;
      font-weight: 500;
      border-radius: 9999px;
    }
    .badge-success { background: var(--success-light); color: var(--success); }
    .badge-warning { background: var(--warning-light); color: #b45309; }
    .badge-danger { background: var(--danger-light); color: var(--danger); }
    .badge-info { background: var(--info-light); color: var(--info); }
    .badge-muted { background: #f1f5f9; color: var(--secondary); }

    /* ============= CARDS ============= */
    .card {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.5rem;
    }

    .card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
    .card-title { font-size: 1.125rem; font-weight: 600; }

    /* ============= LOGIN PAGE ============= */
    #login-page {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      padding: 1rem;
    }

    .login-card {
      background: var(--surface);
      border-radius: 1rem;
      padding: 2.5rem;
      width: 100%;
      max-width: 400px;
      box-shadow: var(--shadow-lg);
      text-align: center;
    }

    .login-logo { font-size: 3rem; margin-bottom: 0.5rem; }
    .login-title { font-size: 1.5rem; font-weight: 700; color: var(--text); margin-bottom: 0.25rem; }
    .login-subtitle { color: var(--text-muted); margin-bottom: 2rem; }

    .google-btn {
      width: 100%;
      padding: 0.875rem;
      font-size: 1rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      transition: all 0.2s;
    }
    .google-btn:hover { background: var(--background); box-shadow: var(--shadow); }
    .google-btn img { width: 20px; height: 20px; }

    #pending-approval { padding: 2rem; text-align: center; }
    #pending-approval h2 { margin-bottom: 1rem; color: var(--warning); }

    /* ============= APP LAYOUT ============= */
    #app-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    #sidebar {
      width: var(--sidebar-width);
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      z-index: 100;
      transition: transform 0.3s;
    }

    .sidebar-header {
      padding: 1.25rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .sidebar-logo { font-size: 1.75rem; }
    .sidebar-brand { font-size: 1.25rem; font-weight: 700; color: var(--text); }

    .sidebar-nav {
      flex: 1;
      overflow-y: auto;
      padding: 1rem 0;
    }

    .nav-section { padding: 0 0.75rem; margin-bottom: 1rem; }
    .nav-section-title { font-size: 0.75rem; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: 0.05em; padding: 0.5rem 0.75rem; }

    .nav-button {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      font-size: 0.875rem;
      color: var(--text-muted);
      background: transparent;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      text-align: left;
      transition: all 0.2s;
    }
    .nav-button:hover { background: var(--background); color: var(--text); }
    .nav-button.active { background: var(--primary-light); color: var(--primary); font-weight: 500; }
    .nav-button .nav-icon { font-size: 1.25rem; }

    .sidebar-user {
      padding: 1rem;
      border-top: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .sidebar-user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      overflow: hidden;
    }
    .sidebar-user-avatar img { width: 100%; height: 100%; object-fit: cover; }

    .sidebar-user-info { flex: 1; min-width: 0; }
    .sidebar-user-name { font-weight: 500; font-size: 0.875rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .sidebar-user-role { font-size: 0.75rem; color: var(--text-muted); }

    .logout-btn {
      padding: 0.5rem;
      background: transparent;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      border-radius: var(--radius);
    }
    .logout-btn:hover { background: var(--danger-light); color: var(--danger); }

    /* Main Content */
    #main-content {
      flex: 1;
      margin-left: var(--sidebar-width);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    #header {
      height: var(--header-height);
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1.5rem;
      position: sticky;
      top: 0;
      z-index: 50;
    }

    #mobile-menu-btn {
      display: none;
      padding: 0.5rem;
      background: transparent;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }

    #sidebar-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      z-index: 99;
    }

    .page {
      flex: 1;
      padding: 1.5rem;
    }

    .page-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .page-title { font-size: 1.5rem; font-weight: 700; }
    .page-subtitle { font-size: 0.875rem; color: var(--text-muted); }

    /* ============= TABLES ============= */
    .table-container {
      overflow-x: auto;
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    .table th, .table td {
      padding: 0.875rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .table th {
      background: var(--background);
      font-weight: 600;
      color: var(--text-muted);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .table tr:hover { background: #f8fafc; }
    .table tr:last-child td { border-bottom: none; }

    .actions-cell { white-space: nowrap; }
    .actions-cell .btn { margin-right: 0.25rem; }

    .empty-state {
      padding: 3rem;
      text-align: center;
      color: var(--text-muted);
    }

    /* ============= FILTERS ============= */
    .filters-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .search-input {
      flex: 1;
      min-width: 200px;
      max-width: 300px;
      padding: 0.625rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 0.875rem;
    }

    .filter-select {
      padding: 0.625rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 0.875rem;
      background: var(--surface);
    }

    /* ============= DASHBOARD ============= */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .stat-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 1.25rem;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: all 0.2s;
      border-left: 4px solid var(--primary);
    }
    .stat-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
    .stat-card.success { border-left-color: var(--success); }
    .stat-card.warning { border-left-color: var(--warning); }
    .stat-card.danger { border-left-color: var(--danger); }
    .stat-card.info { border-left-color: var(--info); }

    .stat-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }
    .stat-value { font-size: 1.5rem; font-weight: 700; }
    .stat-value.success { color: var(--success); }
    .stat-value.warning { color: var(--warning); }
    .stat-value.danger { color: var(--danger); }

    .quick-views { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; }
    .quick-view-card { background: var(--surface); border-radius: var(--radius); padding: 1.25rem; box-shadow: var(--shadow); }
    .quick-view-title { font-size: 1rem; font-weight: 600; margin-bottom: 1rem; }
    .quick-view-list { list-style: none; }
    .quick-view-item { display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border); font-size: 0.875rem; }
    .quick-view-item:last-child { border-bottom: none; }

    /* ============= CALENDAR ============= */
    .calendar-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
    .calendar-title { font-size: 1.25rem; font-weight: 600; }
    .calendar-nav { display: flex; gap: 0.5rem; }

    .calendar-filters { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
    .filter-chip {
      padding: 0.375rem 0.75rem;
      font-size: 0.75rem;
      border: 1px solid var(--border);
      border-radius: 9999px;
      background: var(--surface);
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-chip:hover, .filter-chip.active { background: var(--primary); color: white; border-color: var(--primary); }

    .team-filter-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
    .team-filter-tab {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--surface);
      cursor: pointer;
      transition: all 0.2s;
    }
    .team-filter-tab:hover, .team-filter-tab.active { background: var(--primary); color: white; border-color: var(--primary); }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 1px;
      background: var(--border);
      border-radius: var(--radius);
      overflow: hidden;
    }

    .calendar-weekday {
      background: var(--background);
      padding: 0.75rem;
      text-align: center;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-muted);
    }

    .calendar-day {
      background: var(--surface);
      min-height: 100px;
      padding: 0.5rem;
      position: relative;
    }
    .calendar-day.other-month { background: #f8fafc; }
    .calendar-day.other-month .calendar-day-number { color: var(--muted); }
    .calendar-day.today { background: var(--primary-light); }

    .calendar-day-number { font-size: 0.875rem; font-weight: 500; margin-bottom: 0.25rem; }

    .calendar-events { display: flex; flex-direction: column; gap: 2px; }
    .calendar-event {
      font-size: 0.625rem;
      padding: 2px 4px;
      border-radius: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      background: var(--info-light);
      color: var(--info);
    }
    .calendar-event.completed { background: var(--success-light); color: var(--success); }
    .calendar-event.lapsed { background: var(--danger-light); color: var(--danger); }
    .calendar-event.scheduled { background: var(--info-light); color: var(--info); }

    /* ============= MODALS ============= */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 200;
      padding: 1rem;
    }

    .modal-content {
      background: var(--surface);
      border-radius: var(--radius);
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
    }

    .modal-content.modal-lg { max-width: 800px; }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .modal-title { font-size: 1.125rem; font-weight: 600; }

    .modal-close {
      padding: 0.5rem;
      background: transparent;
      border: none;
      font-size: 1.25rem;
      cursor: pointer;
      color: var(--text-muted);
    }
    .modal-close:hover { color: var(--text); }

    .modal-body { padding: 1.5rem; }
    .modal-footer { padding: 1rem 1.5rem; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 0.75rem; }

    /* ============= TEAMS ============= */
    .teams-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; }
    .team-card { background: var(--surface); border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; }
    .team-card-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--background); border-bottom: 1px solid var(--border); }
    .team-card-title { font-weight: 600; }
    .team-members { padding: 1rem; }
    .team-member { display: flex; align-items: center; padding: 0.5rem 0; border-bottom: 1px solid var(--border); }
    .team-member:last-child { border-bottom: none; }
    .team-member-avatar { width: 32px; height: 32px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600; }
    .team-member-name { font-size: 0.875rem; font-weight: 500; }
    .team-member-role { font-size: 0.75rem; color: var(--text-muted); }

    /* ============= CONTRACT DETAIL ============= */
    .contract-detail-grid { display: grid; gap: 1.5rem; }
    .detail-section { background: var(--background); padding: 1rem; border-radius: var(--radius); }
    .detail-section.full-width { grid-column: 1 / -1; }
    .detail-section-title { font-size: 0.875rem; font-weight: 600; margin-bottom: 1rem; color: var(--primary); }
    .detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.75rem; }
    .detail-item { display: flex; flex-direction: column; gap: 0.25rem; }
    .detail-item.full-width { grid-column: 1 / -1; }
    .detail-label { font-size: 0.75rem; color: var(--text-muted); }
    .detail-value { font-size: 0.875rem; }

    /* ============= LOADING ============= */
    #loading-overlay {
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 300;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--border);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ============= TOAST ============= */
    #toast-container {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 400;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .toast {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1.25rem;
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      animation: slideIn 0.3s ease;
    }

    .toast-success { border-left: 4px solid var(--success); }
    .toast-error { border-left: 4px solid var(--danger); }
    .toast-warning { border-left: 4px solid var(--warning); }
    .toast-info { border-left: 4px solid var(--info); }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* ============= RESPONSIVE ============= */
    @media (max-width: 768px) {
      #sidebar {
        transform: translateX(-100%);
      }
      #sidebar.open {
        transform: translateX(0);
      }
      #sidebar-overlay.visible {
        display: block;
      }
      #main-content {
        margin-left: 0;
      }
      #mobile-menu-btn {
        display: block;
      }
      .page-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .filters-bar {
        flex-direction: column;
      }
      .search-input {
        max-width: none;
      }
      .calendar-day {
        min-height: 60px;
        padding: 0.25rem;
      }
      .calendar-day-number {
        font-size: 0.75rem;
      }
      .calendar-event {
        font-size: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Overlay -->
  <div id="loading-overlay" class="hidden">
    <div class="spinner"></div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container"></div>

  <!-- Login Page -->
  <div id="login-page">
    <div class="login-card">
      <div id="login-content">
        <div class="login-logo">üêõ</div>
        <h1 class="login-title">Pestastic</h1>
        <p class="login-subtitle">Contract Management System</p>
        <button id="google-login-btn" class="google-btn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
          Sign in with Google
        </button>
      </div>
      <div id="pending-approval" class="hidden">
        <h2>‚è≥ Pending Approval</h2>
        <p>Your account is pending administrator approval.</p>
        <p class="text-muted">Please wait or contact your administrator.</p>
      </div>
    </div>
  </div>

  <!-- App Container -->
  <div id="app-container" class="hidden">
    <!-- Sidebar Overlay (Mobile) -->
    <div id="sidebar-overlay"></div>

    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-header">
        <span class="sidebar-logo">üêõ</span>
        <span class="sidebar-brand">Pestastic</span>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">Overview</div>
          <button class="nav-button active" data-tab="dashboard">
            <span class="nav-icon">üìä</span> Dashboard
          </button>
        </div>
        <div class="nav-section">
          <div class="nav-section-title">Management</div>
          <button class="nav-button" data-tab="clients">
            <span class="nav-icon">üë•</span> Clients
          </button>
          <button class="nav-button" data-tab="contracts">
            <span class="nav-icon">üìÑ</span> Contracts
          </button>
          <button class="nav-button" data-tab="contract">
            <span class="nav-icon">‚ûï</span> New Contract
          </button>
          <button class="nav-button" data-tab="payments">
            <span class="nav-icon">üí∞</span> Payments
          </button>
        </div>
        <div class="nav-section">
          <div class="nav-section-title">Operations</div>
          <button class="nav-button" data-tab="calendar">
            <span class="nav-icon">üìÖ</span> Calendar
          </button>
          <button class="nav-button" data-tab="schedule">
            <span class="nav-icon">üìã</span> Schedule
          </button>
          <button class="nav-button" data-tab="complaints">
            <span class="nav-icon">‚ö†Ô∏è</span> Complaints
          </button>
          <button class="nav-button" data-tab="inspections">
            <span class="nav-icon">üîç</span> Inspections
          </button>
        </div>
        <div class="nav-section">
          <div class="nav-section-title">Reports</div>
          <button class="nav-button" data-tab="renewal">
            <span class="nav-icon">üîÑ</span> Renewals
          </button>
          <button class="nav-button" data-tab="untreated">
            <span class="nav-icon">‚ùó</span> Untreated
          </button>
          <button class="nav-button" data-tab="updates">
            <span class="nav-icon">üìù</span> Audit Log
          </button>
        </div>
        <div class="nav-section admin-only">
          <div class="nav-section-title">Admin</div>
          <button class="nav-button" data-tab="teams">
            <span class="nav-icon">üë∑</span> Teams
          </button>
          <button class="nav-button" data-tab="users">
            <span class="nav-icon">üîê</span> Users
          </button>
        </div>
      </nav>
      <div class="sidebar-user">
        <div class="sidebar-user-avatar" id="user-avatar">U</div>
        <div class="sidebar-user-info">
          <div class="sidebar-user-name" id="user-name">User</div>
          <div class="sidebar-user-role" id="user-role">User</div>
        </div>
        <button class="logout-btn" onclick="Auth.signOut()" title="Sign Out">üö™</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main id="main-content">
      <header id="header">
        <button id="mobile-menu-btn">‚ò∞</button>
        <div id="dashboard-timestamp" class="text-muted text-sm"></div>
        <div></div>
      </header>

      <!-- Dashboard Page -->
      <div id="page-dashboard" class="page">
        <div class="page-header">
          <div>
            <h1 class="page-title">Dashboard</h1>
            <p class="page-subtitle">Overview of your pest control operations</p>
          </div>
        </div>
        <div id="dashboard-stats" class="stats-grid"></div>
        <div id="dashboard-quick-views" class="quick-views"></div>
      </div>

      <!-- Clients Page -->
      <div id="page-clients" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Clients</h1>
            <p class="page-subtitle" id="clients-count">0 clients</p>
          </div>
          <button class="btn btn-outline" onclick="UI.exportClientsCSV()">üì• Export</button>
        </div>
        <div class="filters-bar">
          <input type="text" id="clients-search" class="search-input" placeholder="Search clients...">
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Customer No</th>
                <th>Client Name</th>
                <th>Contact Person</th>
                <th>Contact Number</th>
                <th>Email</th>
                <th>Sales Agent</th>
                <th>Contracts</th>
                <th>Follow-ups</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="clients-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Contracts Page -->
      <div id="page-contracts" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Contracts</h1>
            <p class="page-subtitle" id="contracts-count">0 contracts</p>
          </div>
          <button class="btn btn-outline" onclick="UI.exportContractsCSV()">üì• Export</button>
        </div>
        <div class="filters-bar">
          <input type="text" id="contracts-search" class="search-input" placeholder="Search contracts...">
          <select id="contracts-status-filter" class="filter-select">
            <option value="">All Status</option>
            <option value="active">Active</option>
            <option value="expired">Expired</option>
            <option value="renewed">Renewed</option>
          </select>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Customer No</th>
                <th>Contract #</th>
                <th>Client Name</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Total Amount</th>
                <th>Balance</th>
                <th>Warranty</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="contracts-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- New Contract Page -->
      <div id="page-contract" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">New Contract</h1>
            <p class="page-subtitle">Create a new pest control contract</p>
          </div>
          <button id="reset-form-btn" class="btn btn-outline">üîÑ Reset Form</button>
        </div>
        <div class="card">
          <form id="contract-form">
            <!-- Client Type -->
            <div class="form-group">
              <label>Client Type</label>
              <select id="client-type">
                <option value="new">New Client</option>
                <option value="existing">Existing Client</option>
              </select>
            </div>
            <div id="existing-client-group" class="form-group hidden">
              <label>Select Existing Client</label>
              <select id="existing-client-select"></select>
            </div>

            <!-- Client Information -->
            <h3 style="margin: 1.5rem 0 1rem; font-size: 1rem;">Client Information</h3>
            <div class="form-grid">
              <div class="form-group">
                <label>Client/Business Name *</label>
                <input type="text" id="client-name" required>
              </div>
              <div class="form-group">
                <label>Contact Person *</label>
                <input type="text" id="contact-person" required>
              </div>
              <div class="form-group">
                <label>Contact Number *</label>
                <input type="text" id="contact-number" required>
              </div>
              <div class="form-group">
                <label>Email</label>
                <input type="email" id="email">
              </div>
            </div>
            <div class="form-group">
              <label>Address *</label>
              <textarea id="address" rows="2" required></textarea>
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label>Area Size</label>
                <input type="text" id="area-size" placeholder="e.g., 500 sqm">
              </div>
              <div class="form-group">
                <label>Source</label>
                <select id="source">
                  <option value="">Select source</option>
                  <option value="Referral">Referral</option>
                  <option value="Online">Online</option>
                  <option value="Walk-in">Walk-in</option>
                  <option value="Social Media">Social Media</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>

            <!-- Pest Problems -->
            <div class="form-group">
              <label>Pest Problems</label>
              <div id="pest-checkboxes" class="checkbox-grid"></div>
            </div>

            <!-- Contract Details -->
            <h3 style="margin: 1.5rem 0 1rem; font-size: 1rem;">Contract Details</h3>
            <div class="form-grid">
              <div class="form-group">
                <label>Treatment Method *</label>
                <select id="treatment-method" required>
                  <option value="">Select method</option>
                  <option value="General Pest Control">General Pest Control</option>
                  <option value="Termite Treatment">Termite Treatment</option>
                  <option value="Rodent Control">Rodent Control</option>
                  <option value="Mosquito Fogging">Mosquito Fogging</option>
                  <option value="Fumigation">Fumigation</option>
                  <option value="Comprehensive">Comprehensive</option>
                </select>
              </div>
              <div class="form-group">
                <label>Treatment Frequency *</label>
                <select id="treatment-frequency" required>
                  <option value="">Select frequency</option>
                  <option value="weekly">Weekly</option>
                  <option value="bi-weekly">Bi-Weekly</option>
                  <option value="monthly">Monthly</option>
                  <option value="bi-monthly">Bi-Monthly</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="semi-annually">Semi-Annually</option>
                  <option value="annually">Annually</option>
                </select>
              </div>
              <div class="form-group">
                <label>Contract Start Date *</label>
                <input type="date" id="contract-start" required>
              </div>
              <div class="form-group">
                <label>Contract Length (months) *</label>
                <input type="number" id="contract-length" min="1" max="60" required>
              </div>
              <div class="form-group">
                <label>Contract End Date</label>
                <input type="date" id="contract-end" readonly>
              </div>
              <div class="form-group">
                <label>Warranty (years)</label>
                <input type="number" id="warranty-years" min="1" max="10" value="1">
              </div>
            </div>

            <!-- Assignment -->
            <div class="form-grid">
              <div class="form-group">
                <label>Assigned Team</label>
                <select id="assigned-team"></select>
              </div>
              <div class="form-group">
                <label>Time Slot</label>
                <select id="time-slot">
                  <option value="">Select time slot</option>
                  <option value="Morning (8AM-12PM)">Morning (8AM-12PM)</option>
                  <option value="Afternoon (1PM-5PM)">Afternoon (1PM-5PM)</option>
                  <option value="Evening (6PM-9PM)">Evening (6PM-9PM)</option>
                </select>
              </div>
              <div class="form-group">
                <label>Sales Agent *</label>
                <input type="text" id="sales-agent" required>
              </div>
            </div>

            <!-- Financial -->
            <h3 style="margin: 1.5rem 0 1rem; font-size: 1rem;">Financial Details</h3>
            <div class="form-grid">
              <div class="form-group">
                <label>Total Contract Amount (‚Ç±) *</label>
                <input type="number" id="total-amount" min="0" step="0.01" required>
              </div>
              <div class="form-group">
                <label>Downpayment: <span id="downpayment-percent-display">30%</span></label>
                <input type="range" id="downpayment-percent" min="0" max="100" value="30">
              </div>
              <div class="form-group">
                <label>Downpayment Amount (‚Ç±)</label>
                <input type="number" id="downpayment-amount" readonly>
              </div>
            </div>

            <!-- Treatment Schedule -->
            <div style="margin-top: 1.5rem;">
              <button type="button" class="btn btn-secondary" onclick="UI.generateTreatments()">üìÖ Generate Treatment Plan</button>
            </div>
            <div id="treatment-table-container" class="hidden" style="margin-top: 1rem;">
              <h4 style="margin-bottom: 0.5rem;">Treatment Schedule</h4>
              <div class="table-container">
                <table class="table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Date</th>
                      <th>Time Slot</th>
                      <th>Team</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="treatment-table-body"></tbody>
                </table>
              </div>
            </div>

            <!-- Submit -->
            <div style="margin-top: 1.5rem; display: flex; gap: 1rem;">
              <button type="submit" class="btn btn-primary btn-lg">üíæ Save Contract</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Payments Page -->
      <div id="page-payments" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Payments</h1>
            <p class="page-subtitle" id="payments-count">0 payments</p>
          </div>
          <button class="btn btn-outline" onclick="UI.exportPaymentsCSV()">üì• Export</button>
        </div>
        <div class="filters-bar">
          <input type="text" id="payments-search" class="search-input" placeholder="Search payments...">
          <select id="payments-status-filter" class="filter-select">
            <option value="">All Status</option>
            <option value="Received">Received</option>
            <option value="Remitted">Remitted</option>
            <option value="Deposited">Deposited</option>
          </select>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>OR Number</th>
                <th>Client</th>
                <th>Amount</th>
                <th>Date</th>
                <th>Type</th>
                <th>Service</th>
                <th>Status</th>
                <th>Received By</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="payments-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Calendar Page -->
      <div id="page-calendar" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Calendar</h1>
            <p class="page-subtitle">Treatment schedule overview</p>
          </div>
        </div>
        <div class="team-filter-tabs" id="calendar-team-tabs">
          <button class="team-filter-tab active" onclick="UI.setCalendarTeamFilter('all', this)">All Teams</button>
        </div>
        <div class="calendar-filters">
          <button class="filter-chip active" onclick="UI.setCalendarFilter('all', this)">All</button>
          <button class="filter-chip" onclick="UI.setCalendarFilter('scheduled', this)">Scheduled</button>
          <button class="filter-chip" onclick="UI.setCalendarFilter('completed', this)">Completed</button>
          <button class="filter-chip" onclick="UI.setCalendarFilter('lapsed', this)">Lapsed</button>
        </div>
        <div class="card">
          <div class="calendar-header">
            <div class="calendar-nav">
              <button class="btn btn-outline btn-sm" onclick="UI.prevMonth()">‚Üê</button>
              <button class="btn btn-outline btn-sm" onclick="UI.goToToday()">Today</button>
              <button class="btn btn-outline btn-sm" onclick="UI.nextMonth()">‚Üí</button>
            </div>
            <h2 id="calendar-title" class="calendar-title"></h2>
            <div></div>
          </div>
          <div id="calendar-grid" class="calendar-grid"></div>
        </div>
      </div>

      <!-- Schedule Page -->
      <div id="page-schedule" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Schedule</h1>
            <p class="page-subtitle" id="schedule-count">0 treatments</p>
          </div>
        </div>
        <div class="team-filter-tabs" id="schedule-team-tabs">
          <button class="team-filter-tab active" onclick="UI.setScheduleTeamFilter('all', this)">All Teams</button>
        </div>
        <div class="filters-bar">
          <input type="text" id="schedule-search" class="search-input" placeholder="Search schedule...">
          <select id="schedule-date-filter" class="filter-select">
            <option value="">All Dates</option>
            <option value="today">Today</option>
            <option value="this-week">This Week</option>
            <option value="this-month">This Month</option>
          </select>
          <select id="schedule-status-filter" class="filter-select">
            <option value="">All Status</option>
            <option value="Scheduled">Scheduled</option>
            <option value="Completed">Completed</option>
            <option value="Lapsed">Lapsed</option>
            <option value="Cancelled">Cancelled</option>
          </select>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Customer No</th>
                <th>Client</th>
                <th>Treatment #</th>
                <th>Date</th>
                <th>Time</th>
                <th>Team</th>
                <th>Type</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="schedule-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Complaints Page -->
      <div id="page-complaints" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Complaints</h1>
            <p class="page-subtitle" id="complaints-count">0 complaints</p>
          </div>
          <button class="btn btn-primary" onclick="UI.openAddComplaintModal()">‚ûï Add Complaint</button>
        </div>
        <div class="filters-bar">
          <input type="text" id="complaints-search" class="search-input" placeholder="Search complaints...">
          <select id="complaints-priority-filter" class="filter-select">
            <option value="">All Priority</option>
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
          </select>
          <select id="complaints-status-filter" class="filter-select">
            <option value="">All Status</option>
            <option value="Open">Open</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
          </select>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Client</th>
                <th>Description</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Assigned To</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="complaints-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Inspections Page -->
      <div id="page-inspections" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Inspections</h1>
            <p class="page-subtitle" id="inspections-count">0 inspections</p>
          </div>
          <button class="btn btn-primary" onclick="UI.openAddInspectionModal()">‚ûï Add Inspection</button>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Client</th>
                <th>Contact</th>
                <th>Address</th>
                <th>Inspected By</th>
                <th>Pest Problems</th>
                <th>Status</th>
                <th>Conversion Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="inspections-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Renewal Page -->
      <div id="page-renewal" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Renewals</h1>
            <p class="page-subtitle">Contracts due for renewal</p>
          </div>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Customer No</th>
                <th>Client</th>
                <th>End Date</th>
                <th>Amount</th>
                <th>Warranty</th>
                <th>Status</th>
                <th>Agent</th>
                <th>Source</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="renewal-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Untreated Page -->
      <div id="page-untreated" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Untreated</h1>
            <p class="page-subtitle" id="untreated-count">0 overdue treatments</p>
          </div>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Client</th>
                <th>Treatment Type</th>
                <th>Scheduled Date</th>
                <th>Days Overdue</th>
                <th>Reason</th>
                <th>Contact</th>
                <th>Severity</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="untreated-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Updates/Audit Log Page -->
      <div id="page-updates" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Audit Log</h1>
            <p class="page-subtitle" id="updates-count">0 updates</p>
          </div>
          <button class="btn btn-outline" onclick="UI.exportAuditLogCSV()">üì• Export</button>
        </div>
        <div class="filters-bar">
          <input type="text" id="updates-search" class="search-input" placeholder="Search updates...">
          <select id="updates-type-filter" class="filter-select">
            <option value="">All Types</option>
            <option value="Contract Created">Contract Created</option>
            <option value="Payment Recorded">Payment Recorded</option>
            <option value="Treatment Completed">Treatment Completed</option>
            <option value="Treatment Rescheduled">Treatment Rescheduled</option>
            <option value="Client Updated">Client Updated</option>
          </select>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Customer No</th>
                <th>Change Type</th>
                <th>Old Value</th>
                <th>New Value</th>
                <th>Reason</th>
                <th>Updated By</th>
              </tr>
            </thead>
            <tbody id="updates-table-body"></tbody>
          </table>
        </div>
      </div>

      <!-- Teams Page -->
      <div id="page-teams" class="page hidden">
        <div class="page-header">
          <div>
            <h1 class="page-title">Teams</h1>
            <p class="page-subtitle">Manage your technician teams</p>
          </div>
          <button class="btn btn-primary" onclick="UI.openAddTeamModal()">‚ûï Add Team</button>
        </div>
        <div id="teams-container" class="teams-grid"></div>
      </div>

      <!-- Users Page -->
      <div id="page-users" class="page hidden admin-only">
        <div class="page-header">
          <div>
            <h1 class="page-title">Users</h1>
            <p class="page-subtitle">Manage user access</p>
          </div>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th></th>
                <th>Name</th>
                <th>Email</th>
                <th>Role</th>
                <th>Status</th>
                <th>Joined</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="users-table-body"></tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <!-- Client Edit Modal -->
  <div id="client-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Edit Client</h3>
        <button class="modal-close" onclick="UI.closeClientModal()">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="edit-client-customer-no">
        <div class="form-grid">
          <div class="form-group">
            <label>Client Name *</label>
            <input type="text" id="edit-client-name" required>
          </div>
          <div class="form-group">
            <label>Contact Person *</label>
            <input type="text" id="edit-contact-person" required>
          </div>
          <div class="form-group">
            <label>Contact Number *</label>
            <input type="text" id="edit-contact-number" required>
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="edit-email">
          </div>
        </div>
        <div class="form-group">
          <label>Address *</label>
          <textarea id="edit-address" rows="2" required></textarea>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label>Area Size</label>
            <input type="text" id="edit-area-size">
          </div>
          <div class="form-group">
            <label>Sales Agent</label>
            <input type="text" id="edit-sales-agent">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closeClientModal()">Cancel</button>
        <button class="btn btn-primary" onclick="UI.saveClientEdit()">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div id="payment-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Record Payment</h3>
        <button class="modal-close" onclick="UI.closePaymentModal()">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="payment-id">
        <input type="hidden" id="payment-contract-id">
        <input type="hidden" id="payment-customer-no">
        <div style="margin-bottom: 1rem; padding: 0.75rem; background: var(--background); border-radius: var(--radius);">
          <div><strong>Client:</strong> <span id="payment-customer-display"></span></div>
          <div><strong>Outstanding:</strong> <span id="payment-outstanding"></span></div>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label>OR Number *</label>
            <input type="text" id="payment-or-number" required>
          </div>
          <div class="form-group">
            <label>Amount *</label>
            <input type="number" id="payment-amount" min="0" step="0.01" required>
          </div>
          <div class="form-group">
            <label>Payment Date *</label>
            <input type="date" id="payment-date" required>
          </div>
          <div class="form-group">
            <label>Payment Type *</label>
            <select id="payment-type" required>
              <option value="">Select type</option>
              <option value="Cash">Cash</option>
              <option value="Check">Check</option>
              <option value="Bank Transfer">Bank Transfer</option>
              <option value="GCash">GCash</option>
              <option value="Credit Card">Credit Card</option>
            </select>
          </div>
          <div class="form-group">
            <label>Status</label>
            <select id="payment-status">
              <option value="Received">Received</option>
              <option value="Remitted">Remitted</option>
              <option value="Deposited">Deposited</option>
            </select>
          </div>
          <div class="form-group">
            <label>Received By *</label>
            <input type="text" id="payment-received-by" required>
          </div>
        </div>
        <div class="form-group">
          <label>Service Rendered *</label>
          <input type="text" id="payment-service" required>
        </div>
        <div class="form-group">
          <label>Notes</label>
          <textarea id="payment-notes" rows="2"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closePaymentModal()">Cancel</button>
        <button class="btn btn-primary" onclick="UI.savePayment()">Save Payment</button>
      </div>
    </div>
  </div>

  <!-- Treatment Action Modal -->
  <div id="treatment-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="treatment-modal-title" class="modal-title">Treatment Action</h3>
        <button class="modal-close" onclick="UI.closeTreatmentModal()">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="treatment-action-id">
        <input type="hidden" id="treatment-action-type">
        <div style="margin-bottom: 1rem; padding: 0.75rem; background: var(--background); border-radius: var(--radius);">
          <div><strong>Client:</strong> <span id="treatment-client-display"></span></div>
          <div><strong>Scheduled:</strong> <span id="treatment-date-display"></span></div>
        </div>

        <!-- Complete Fields -->
        <div id="complete-fields" class="hidden">
          <div class="form-grid">
            <div class="form-group">
              <label>Date Completed *</label>
              <input type="date" id="complete-date" required>
            </div>
            <div class="form-group">
              <label>Technician *</label>
              <input type="text" id="complete-technician" required>
            </div>
          </div>
          <div class="form-group">
            <label>Chemical Used</label>
            <input type="text" id="complete-chemical">
          </div>
          <div class="form-group">
            <label>Notes</label>
            <textarea id="complete-notes" rows="2"></textarea>
          </div>
        </div>

        <!-- Reschedule Fields -->
        <div id="reschedule-fields" class="hidden">
          <div class="form-grid">
            <div class="form-group">
              <label>New Date *</label>
              <input type="date" id="reschedule-date" required>
            </div>
            <div class="form-group">
              <label>Time Slot</label>
              <select id="reschedule-time">
                <option value="">Select time slot</option>
                <option value="Morning (8AM-12PM)">Morning (8AM-12PM)</option>
                <option value="Afternoon (1PM-5PM)">Afternoon (1PM-5PM)</option>
                <option value="Evening (6PM-9PM)">Evening (6PM-9PM)</option>
              </select>
            </div>
            <div class="form-group">
              <label>Assign Team</label>
              <select id="reschedule-team"></select>
            </div>
          </div>
          <div class="form-group">
            <label>Reason for Rescheduling *</label>
            <textarea id="reschedule-reason" rows="2" required></textarea>
          </div>
        </div>

        <!-- Cancel Fields -->
        <div id="cancel-fields" class="hidden">
          <div class="form-group">
            <label>Reason for Cancellation *</label>
            <textarea id="cancel-reason" rows="3" required></textarea>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closeTreatmentModal()">Cancel</button>
        <button class="btn btn-primary" onclick="UI.executeTreatmentAction()">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Complaint Modal -->
  <div id="complaint-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="complaint-modal-title" class="modal-title">Add Complaint</h3>
        <button class="modal-close" onclick="UI.closeComplaintModal()">√ó</button>
      </div>
      <div class="modal-body">
        <form id="complaint-form">
          <input type="hidden" id="complaint-id">
          <div class="form-grid">
            <div class="form-group">
              <label>Customer *</label>
              <select id="complaint-customer" required></select>
            </div>
            <div class="form-group">
              <label>Date Reported *</label>
              <input type="date" id="complaint-date" required>
            </div>
            <div class="form-group">
              <label>Priority Level</label>
              <select id="complaint-priority">
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
              </select>
            </div>
            <div class="form-group">
              <label>Assigned To</label>
              <select id="complaint-assigned"></select>
            </div>
          </div>
          <div class="form-group">
            <label>Description *</label>
            <textarea id="complaint-description" rows="3" required></textarea>
          </div>
          <div class="form-group">
            <label>Resolution Notes</label>
            <textarea id="complaint-resolution" rows="2"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closeComplaintModal()">Cancel</button>
        <button class="btn btn-primary" onclick="UI.saveComplaint()">Save Complaint</button>
      </div>
    </div>
  </div>

  <!-- Inspection Modal -->
  <div id="inspection-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="inspection-modal-title" class="modal-title">Add Inspection</h3>
        <button class="modal-close" onclick="UI.closeInspectionModal()">√ó</button>
      </div>
      <div class="modal-body">
        <form id="inspection-form">
          <input type="hidden" id="inspection-id">
          <div class="form-grid">
            <div class="form-group">
              <label>Client Name *</label>
              <input type="text" id="inspection-client-name" required>
            </div>
            <div class="form-group">
              <label>Contact Number *</label>
              <input type="text" id="inspection-contact" required>
            </div>
            <div class="form-group">
              <label>Inspection Date *</label>
              <input type="date" id="inspection-date" required>
            </div>
            <div class="form-group">
              <label>Inspected By *</label>
              <select id="inspection-by" required></select>
            </div>
          </div>
          <div class="form-group">
            <label>Address *</label>
            <textarea id="inspection-address" rows="2" required></textarea>
          </div>
          <div class="form-group">
            <label>Pest Problems Found</label>
            <div id="inspection-pest-checkboxes" class="checkbox-grid"></div>
          </div>
          <div class="form-group">
            <label>Notes</label>
            <textarea id="inspection-notes" rows="2"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closeInspectionModal()">Cancel</button>
        <button class="btn btn-primary" onclick="UI.saveInspection()">Save Inspection</button>
      </div>
    </div>
  </div>

  <!-- Team Modal -->
  <div id="team-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="team-modal-title" class="modal-title">Add Team</h3>
        <button class="modal-close" onclick="UI.closeTeamModal()">√ó</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="team-id">
        <div class="form-group">
          <label>Team Name *</label>
          <input type="text" id="team-name" required>
        </div>
        <div class="form-group">
          <label>Team Members</label>
          <div id="team-members-container"></div>
          <button type="button" class="btn btn-outline btn-sm" onclick="UI.addTeamMemberField()" style="margin-top: 0.5rem;">‚ûï Add Member</button>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closeTeamModal()">Cancel</button>
        <button class="btn btn-primary" onclick="UI.saveTeam()">Save Team</button>
      </div>
    </div>
  </div>

  <!-- Contract Detail Modal -->
  <div id="contract-detail-modal" class="modal hidden">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <h3 class="modal-title">Contract Details</h3>
        <button class="modal-close" onclick="UI.closeContractDetailModal()">√ó</button>
      </div>
      <div class="modal-body" id="contract-detail-content"></div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closeContractDetailModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- Confirm Modal -->
  <div id="confirm-modal" class="modal hidden">
    <div class="modal-content" style="max-width: 400px;">
      <div class="modal-header">
        <h3 id="confirm-modal-title" class="modal-title">Confirm</h3>
        <button class="modal-close" onclick="UI.closeConfirmModal()">√ó</button>
      </div>
      <div class="modal-body">
        <p id="confirm-modal-message"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="UI.closeConfirmModal()">Cancel</button>
        <button id="confirm-modal-action" class="btn btn-danger">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Load App Script -->
  <script src="app.js"></script>
</body>
</html>
